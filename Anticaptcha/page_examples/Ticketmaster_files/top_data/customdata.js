var QueueIt;(function(n){var t;(function(n){n.Version="1.7.43"})(t=n.Javascript||(n.Javascript={}))})(QueueIt||(QueueIt={})),function(n){var t;(function(n){var t=function(){function n(){}return n.parse=function(n,t){function u(n,i){var f,e,r=n[i];if(r&&typeof r=="object")for(f in r)Object.prototype.hasOwnProperty.call(r,f)&&(e=u(r,f),e!==undefined?r[f]=e:delete r[f]);return t.call(n,i,r)}if(t===void 0&&(t=null),!n)return null;if(typeof JSON=="object")return JSON.parse(n,t);var i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r;if(n=String(n),i.lastIndex=0,i.test(n)&&(n=n.replace(i,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return r=eval("("+n+")"),typeof t=="function"?u({"":r},""):r;throw new SyntaxError("JSON.parse");},n}();n.Json=t})(t=n.Tools||(n.Tools={}))}(QueueIt||(QueueIt={})),function(n){var t;(function(t){var i;(function(t){var i=function(){function n(){}return n.ENTERED_QUEUE_GOT_QUEUEID="EnteredQueueGotQueueId",n.QUEUEID_ALREADY_EXIST="QueueIdAlreadyExist",n.INVALID_CAPTCHA_TOKEN="InvalidCaptchaToken",n.MISSING_CUSTOM_DATA_KEY="MissingCustomDataKey",n.UNIQUE_KEY_VIOLATION="UniqueKeyViolation",n.UNEXPECTED_FAILURE_TO_ENQUEUE="UnexpectedFailureToEnqueue",n.IDLE_QUEUE_ILLEGAL_ACTION="IdleQueueIllegalAction",n.CUSTOM_DATA_UPDATED="CustomDataUpdated",n.MISSING_QUEUE_ID="MissingQueueId",n.UNEXPECTED_FAILURE_TO_UPDATE="UnexpectedFailureToUpdate",n}(),r=function(){function n(){}return n.CUSTOM_DATA_BY_KEY="CustomDataByKey",n.UNEXPECTED_FAILURE_TO_GET_BY_KEY="UnexpectedFailureToGetByKey",n.CUSTOM_DATA_BY_QUEUE_ID="CustomDataByQueueId",n.UNEXPECTED_FAILURE_TO_GET_BY_QUEUE_ID="UnexpectedFailureToGetByQueueId",n}(),u=function(){function t(t){t===void 0&&(t=!1);var u=this;this.enqueue=function(n,t,i,r,f){u.onEnqueued=r;u.onEnqueueFailed=f;var e={Type:"Enqueue",Key:n,Email:t,CustomData:i};u.postToParent(e)};this.enqueueWithKey=function(n,t,i){u.onEnqueued=t;u.onEnqueueFailed=i;var r={Type:"Enqueue",Key:n,Email:null,CustomData:null};u.postToParent(r)};this.updateCustomData=function(n,t,i,r){u.onCustomDataUpdated=i;u.onCustomDataUpdateFailed=r;var f={Type:"Update",Email:n,CustomData:t};u.postToParent(f)};this.getByKey=function(n,t,i){u.onCustomDataGetByKey=t;u.onCustomDataGetByKeyFailed=i;var r={Key:n,Type:"GetByKey"};u.postToParent(r)};this.getByQueueId=function(n,t,i){u.onCustomDataGetByQueueId=t;u.onCustomDataGetByQueueIdFailed=i;var r={QueueId:n,Type:"GetByQueueId"};u.postToParent(r)};this.deserialize=function(t){return n.Tools.Json.parse(t)};this.postToParent=function(n){parent.postMessage(n,"*")};this.notifyDirect=function(n){u.handleMessageReceived(n)};this.receiveMessage=function(n){if(!n.data||!n.data.Type){var t=u.deserialize(n.data);u.handleMessageReceived(t)}};this.handleMessageReceived=function(n){if(n.messageType==i.ENTERED_QUEUE_GOT_QUEUEID)u.onEnqueued(n.queueId);else if(n.messageType==i.IDLE_QUEUE_ILLEGAL_ACTION)u.onEnqueueFailed(i.IDLE_QUEUE_ILLEGAL_ACTION);else if(n.messageType==i.QUEUEID_ALREADY_EXIST)u.onEnqueueFailed(i.QUEUEID_ALREADY_EXIST);else if(n.messageType==i.INVALID_CAPTCHA_TOKEN)u.onEnqueueFailed(i.INVALID_CAPTCHA_TOKEN);else if(n.messageType==i.MISSING_CUSTOM_DATA_KEY)u.onEnqueueFailed(i.MISSING_CUSTOM_DATA_KEY);else if(n.messageType==i.UNIQUE_KEY_VIOLATION)u.onEnqueueFailed(i.UNIQUE_KEY_VIOLATION);else if(n.messageType==i.UNEXPECTED_FAILURE_TO_ENQUEUE)u.onEnqueueFailed(i.UNEXPECTED_FAILURE_TO_ENQUEUE);else if(n.messageType==i.CUSTOM_DATA_UPDATED)u.onCustomDataUpdated();else if(n.messageType==i.MISSING_QUEUE_ID)u.onCustomDataUpdateFailed(i.MISSING_QUEUE_ID);else if(n.messageType==i.UNEXPECTED_FAILURE_TO_UPDATE)u.onCustomDataUpdateFailed(i.UNEXPECTED_FAILURE_TO_UPDATE);else if(n.messageType==r.CUSTOM_DATA_BY_KEY)u.onCustomDataGetByKey(n.records);else if(n.messageType==r.UNEXPECTED_FAILURE_TO_GET_BY_KEY)u.onCustomDataGetByKeyFailed(r.UNEXPECTED_FAILURE_TO_GET_BY_KEY);else if(n.messageType==r.CUSTOM_DATA_BY_QUEUE_ID)u.onCustomDataGetByQueueId(n.key,n.customData);else if(n.messageType==r.UNEXPECTED_FAILURE_TO_GET_BY_QUEUE_ID)u.onCustomDataGetByQueueIdFailed(r.UNEXPECTED_FAILURE_TO_GET_BY_QUEUE_ID)};this.listenParentFrame=function(){window.addEventListener?window.addEventListener("message",u.receiveMessage,!1):window.attachEvent&&window.attachEvent("onmessage",function(){return u.receiveMessage})};this.listenParentFrame();t&&(window.customDataClient=this)}return t}();t.CustomDataClient=u})(i=t.CustomData||(t.CustomData={}))})(t=n.Javascript||(n.Javascript={}))}(QueueIt||(QueueIt={}));